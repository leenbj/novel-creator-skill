# 命令手册（详细版）

## 0. 每章标准门禁（强制）
每章固定顺序：
1. `/更新记忆`
2. `/检查一致性`
3. `/风格校准`
4. `/校稿`
5. `/门禁检查`

门禁失败规则：`/门禁检查` 未通过，章节状态必须保持草稿。

## 1. 核心创作命令
`/写全篇`
- 输入：题材、剧情种子、主角目标、核心冲突、预期篇幅。
- 输出：`idea_seed.md`、`million_word_blueprint.md`、`novel_plan.md`、`novel_state.md`。

`/写作`
- 输入：章节目标、冲突、人物、上章结尾。
- 输出：单章草稿（进入门禁流程）。

`/续写`
- 输入：项目目录。
- 输出：状态恢复 + 新章节草稿（进入门禁流程）。

`/批量写作`
- 输入：目标章数、每章任务点。
- 输出：多章草稿（每章都要跑门禁流程）。

`/修改章节`
- 输入：目标章节、修改要求。
- 输出：修订稿 + 影响报告 + 记忆级联更新。

## 2. 分析与建库命令
`/拆书`
- 输入：目标作品文本或信息。
- 输出：结构拆解、爽点机制、人设与开篇策略。

`/仿写`
- 输入：样章文本（建议 >=2）。
- 输出：写法模板 + 风格特征摘要。

`/建库`
- 输入：项目名、题材、核心设定。
- 输出：记忆系统与知识库初始化。

## 3. 质量命令（每章必经）
`/更新记忆`
- 输入：本章正文。
- 输出：`novel_state.md`、追踪器、摘要更新。
- 产物：`04_editing/gate_artifacts/<chapter_id>/memory_update.md`

`/检查一致性`
- 输入：本章正文 + 当前记忆文件。
- 输出：一致性风险清单 + 修正建议。
- 产物：`04_editing/gate_artifacts/<chapter_id>/consistency_report.md`

`/风格校准`
- 输入：本章正文 + `style_anchor.md`。
- 输出：风格偏移报告 + 修正建议。
- 产物：`04_editing/gate_artifacts/<chapter_id>/style_calibration.md`

`/校稿`
- 输入：校准后的章节稿。
- 输出：去AI味发布稿。
- 产物：
- `04_editing/gate_artifacts/<chapter_id>/copyedit_report.md`
- `04_editing/gate_artifacts/<chapter_id>/publish_ready.md`

`/门禁检查`
- 输入：项目目录 + 章节文件。
- 执行：`python3 scripts/chapter_gate_check.py --project-root <项目目录> --chapter-file <章节文件>`
- 输出：通过/失败结果。
- 产物：`04_editing/gate_artifacts/<chapter_id>/gate_result.json`

## 4. 风格系统命令
`/风格提取`
- 输入：风格名、项目目录、样章文件。
- 输出：项目风格档案 + 全局风格库索引。

`/题材选风格`
- 输入：题材、目标读者、节奏偏好。
- 输出：题材基线风格 + 项目修正项。

`/风格迁移`
- 输入：章节草稿 + 目标风格档案。
- 输出：迁移稿 + 偏移说明。

`/风格库检索`
- 输入：题材与目标效果。
- 输出：可复用风格候选与优先级。
